import{d as _,r,c as m,a as s,w as d,Q as b,u as h,o as c,b as f,e as p,f as x,g,h as v,i as w,t as I}from"./index-B-uU-IwF.js";import{api as S}from"./axios-D2lIpP-a.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"fullscreen bg-blue text-white flex flex-center"},k={key:0,class:"text-red q-mt-md"},B=_({__name:"LoginPage",setup(C){const y=h(),t=r(""),o=r(""),n=r(!1),l=r("");async function u(){if(!t.value.trim()||!o.value.trim()){l.value="Kullanıcı adı ve şifre gereklidir!";return}n.value=!0,l.value="";try{const e=await S.post("/auth/login",{username:t.value.trim(),password:o.value.trim()});e.data.success?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",e.data.user.username),localStorage.setItem("fullName",e.data.user.fullName),localStorage.setItem("isAdmin",e.data.user.isAdmin.toString()),localStorage.setItem("userId",e.data.user.id.toString()),console.log("Giriş başarılı:",e.data.message),y.push("/")):l.value=e.data.message||"Giriş başarısız!"}catch(e){if(console.error("Login hatası:",e),typeof e=="object"&&e!==null&&"response"in e){const a=e;a.response?.data?.message?l.value=a.response.data.message:a.response?.status===401?l.value="Kullanıcı adı veya şifre hatalı!":l.value="Bağlantı hatası! Lütfen tekrar deneyin."}else l.value="Bilinmeyen bir hata oluştu!"}finally{n.value=!1}}return(e,a)=>(c(),m("div",K,[s(b,{class:"my-card"},{default:d(()=>[s(f,null,{default:d(()=>a[2]||(a[2]=[p("div",{class:"text-h6"},"GÖKÇE Pansiyon",-1),p("div",{class:"text-subtitle2"},"Giriş Yapın",-1)])),_:1,__:[2]}),s(f,null,{default:d(()=>[s(g,{filled:"",modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=i=>t.value=i),label:"Kullanıcı Adı",class:"q-mb-md",onKeyup:v(u,["enter"])},null,8,["modelValue"]),s(g,{filled:"",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=i=>o.value=i),label:"Şifre",type:"password",class:"q-mb-md",onKeyup:v(u,["enter"])},null,8,["modelValue"]),s(w,{onClick:u,color:"primary",label:"Giriş Yap",class:"full-width",loading:n.value},null,8,["loading"]),l.value?(c(),m("div",k,I(l.value),1)):x("",!0)]),_:1})]),_:1})]))}}),Q=V(B,[["__scopeId","data-v-6d59c038"]]);export{Q as default};
